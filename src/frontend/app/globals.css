@import 'tailwindcss';

@plugin "daisyui" {
  themes: autumn --default, abyss;
}

@plugin "daisyui/theme" {
  name: "autumn";
  default: true;
  prefersdark: false;
  color-scheme: "light";
  --color-base-100: #FAF6F1;
  --color-base-200: #F3EDE5;
  --color-base-300: #E8DFD3;
  --color-base-content: #3D3830;
  --color-primary: oklch(40.723% 0.161 17.53);
  --color-primary-content: oklch(88.144% 0.032 17.53);
  --color-secondary: oklch(61.676% 0.169 23.865);
  --color-secondary-content: oklch(12.335% 0.033 23.865);
  --color-accent: oklch(73.425% 0.094 60.729);
  --color-accent-content: oklch(14.685% 0.018 60.729);
  --color-neutral: oklch(54.367% 0.037 51.902);
  --color-neutral-content: oklch(90.873% 0.007 51.902);
  --color-info: oklch(69.224% 0.097 207.284);
  --color-info-content: oklch(13.844% 0.019 207.284);
  --color-success: oklch(60.995% 0.08 174.616);
  --color-success-content: oklch(12.199% 0.016 174.616);
  --color-warning: oklch(70.081% 0.164 56.844);
  --color-warning-content: oklch(14.016% 0.032 56.844);
  --color-error: oklch(53.07% 0.241 24.16);
  --color-error-content: oklch(90.614% 0.048 24.16);
  --radius-selector: 1rem;
  --radius-field: 0.5rem;
  --radius-box: 1rem;
  --size-selector: 0.25rem;
  --size-field: 0.25rem;
  --border: 1px;
  --depth: 1;
  --noise: 0;
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

html {
  font-family: var(--font-sen), ui-sans-serif, system-ui, sans-serif;
  scroll-snap-type: y proximity;
}

@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-up {
  animation-name: fadeUp;
  animation-duration: 1000ms;
  animation-timing-function: ease-out;
  opacity: 100;
  transform: translateY(20px);
  animation-fill-mode: forwards;
}

.animate-fade-up-delayed {
  animation-name: fadeUp;
  animation-duration: 1000ms;
  animation-timing-function: ease-out;
  animation-delay: 1500ms;
  opacity: 0;
  transform: translateY(20px);
  animation-fill-mode: forwards;
}

/* Glassmorphism utility classes */

/* Primary glass container - cards, main panels */
.glass-card {
  @apply bg-base-100/80 backdrop-blur-lg border border-base-300/50
         shadow-[inset_0_1px_2px_rgba(255,255,255,0.12),0_8px_32px_rgba(0,0,0,0.08)];
}

/* Dropdown menus and overlays - slightly more opaque */
.glass-dropdown {
  @apply bg-base-100/85 backdrop-blur-md border border-base-300/50
         shadow-[inset_0_1px_2px_rgba(255,255,255,0.12),0_8px_32px_rgba(0,0,0,0.12)];
}

/* Primary-tinted badges */
.glass-badge-primary {
  @apply bg-primary/25 border border-white/10 text-primary font-medium
         backdrop-blur-sm shadow-[inset_0_1px_1px_rgba(255,255,255,0.2),0_2px_6px_rgba(0,0,0,0.08)];
}

/* Nested panels inside glass containers - no blur to avoid stacking */
.glass-panel-nested {
  @apply bg-base-200/60 border border-base-300/30;
}

/* Floating alerts/banners - more opaque */
.glass-alert {
  @apply bg-base-100/90 backdrop-blur-lg border border-base-300/50
         shadow-[inset_0_1px_2px_rgba(255,255,255,0.12),0_8px_32px_rgba(0,0,0,0.15)];
}

/* Subtle dual-radial page background gradient */
.page-gradient {
  background: radial-gradient(circle at top left, var(--color-base-300), transparent 45%),
              radial-gradient(circle at bottom right, var(--color-base-200), transparent 45%);
}

/* Sunken glass inputs — pressed-in feel for text fields inside glass containers */
.glass-input {
  @apply bg-base-200/50 border-none rounded-full
         shadow-[inset_0_1px_3px_rgba(0,0,0,0.1),inset_0_1px_1px_rgba(0,0,0,0.06)];
}

/* Inner content panels - analytics-consistent styling */
.glass-panel {
  @apply rounded-2xl border border-base-300/45 bg-base-100/80 backdrop-blur-lg
         shadow-[inset_0_1px_2px_rgba(255,255,255,0.12),0_8px_32px_rgba(0,0,0,0.08)];
}

/* Glass badge variants */
.glass-badge-success {
  @apply bg-success/15 border border-white/10 text-success
         backdrop-blur-sm shadow-[inset_0_1px_1px_rgba(255,255,255,0.2),0_2px_6px_rgba(0,0,0,0.08)];
}

.glass-badge-warning {
  @apply bg-warning/15 border border-white/10 text-warning
         backdrop-blur-sm shadow-[inset_0_1px_1px_rgba(255,255,255,0.2),0_2px_6px_rgba(0,0,0,0.08)];
}

.glass-badge-error {
  @apply bg-error/15 border border-white/10 text-error
         backdrop-blur-sm shadow-[inset_0_1px_1px_rgba(255,255,255,0.2),0_2px_6px_rgba(0,0,0,0.08)];
}

.glass-badge-info {
  @apply bg-info/15 border border-white/10 text-info
         backdrop-blur-sm shadow-[inset_0_1px_1px_rgba(255,255,255,0.2),0_2px_6px_rgba(0,0,0,0.08)];
}

/* Glass chat bubbles — translucent bg so backdrop-blur shows through, tail inherits via `background-color: inherit` */
.glass-chat-user {
  @apply !bg-primary/80 text-primary-content backdrop-blur-sm
         shadow-[inset_0_1px_2px_rgba(255,255,255,0.15),0_2px_8px_rgba(0,0,0,0.1)];
}

.glass-chat-assistant {
  @apply !bg-primary/15 text-base-content backdrop-blur-sm
         shadow-[inset_0_1px_2px_rgba(255,255,255,0.2),0_2px_8px_rgba(0,0,0,0.06)];
}

/* Fast fade-up animation for card entrances */
@keyframes fadeUpFast {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-up-fast {
  animation-name: fadeUpFast;
  animation-duration: 800ms;
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
  opacity: 0;
}

/* Count pulse animation for result count changes — dim-and-pop effect */
@keyframes countPulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  30% {
    transform: scale(1.04);
    opacity: 0.6;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-count-pulse {
  animation: countPulse 300ms ease-out;
}

/* Badge entry animation — backwards fill so transitions work after animation ends */
@keyframes badgeIn {
  from {
    opacity: 0;
    transform: scale(0.85);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-badge-in {
  animation: badgeIn 250ms ease-out backwards;
}

/* Badge transition base — enables smooth exit + layout collapse */
.badge-animated {
  transition: max-width 250ms ease-out, opacity 200ms ease-out, transform 200ms ease-out,
              padding 250ms ease-out, border-width 250ms ease-out;
  max-width: 300px;
}

/* Badge removing state — collapses width so siblings slide into place */
.badge-removing {
  max-width: 0 !important;
  opacity: 0 !important;
  transform: scale(0.85) !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
  border-width: 0 !important;
  overflow: hidden !important;
}

/* Listings exit animation — shift down and fade out */
@keyframes fadeDownOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(12px);
  }
}

.animate-fade-down-out {
  animation: fadeDownOut 250ms ease-in forwards;
}

/* Global button press feedback */
.btn:active {
  transform: scale(0.98);
}

/* Global focus ring for text inputs only — excludes DaisyUI controls
   (tabs, theme toggles, swaps) that handle their own focus styles */
input:not(.unstyled):not(.tab):not(.theme-controller):not([class*="swap"]):focus,
textarea:not(.unstyled):focus,
select:not(.unstyled):focus,
.input:not(.unstyled):not(.glass-input):focus,
.textarea:not(.unstyled):focus,
.select:not(.unstyled):focus {
  @apply ring-2 ring-primary/50 outline-none;
}

/* Glass inputs handle their own focus state via inset shadow — no ring */
.glass-input:focus,
.glass-input:focus-visible {
  @apply ring-0 outline-none
         bg-base-200/60
         shadow-[inset_0_1px_4px_rgba(0,0,0,0.12),inset_0_1px_2px_rgba(0,0,0,0.08)];
}


/* Lighter skeleton background while preserving shimmer animation */
.skeleton {
  background-color: var(--color-base-200);
}

/* Consistent shadow system */
.shadow-subtle {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.shadow-elevated {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

.shadow-floating {
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

/* Card hover state - consistent across all cards */
.card-hover {
  @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1;
}

/* Button hover state */
.btn-hover {
  @apply transition-transform hover:scale-105;
}

/* Focus ring — keyboard-only, suppressed on mouse click.
   DaisyUI components handle their own focus styles; this catches
   custom buttons/links that don't. Uses :focus-visible so it only
   fires on keyboard navigation, but Chrome still triggers it on
   some click targets (tabs, role="button"). We scope narrowly to
   avoid fighting DaisyUI: only plain <a> and <button> WITHOUT
   a DaisyUI class get the ring. */
button:not(.btn):not(.tab):focus-visible,
a:not(.btn):not(.tab):focus-visible {
  @apply outline-none ring-2 ring-primary/50 ring-offset-2 ring-offset-base-100;
}

/* Table header styling for better visual hierarchy */
.table thead th {
  @apply bg-base-200/50 font-semibold text-base-content/80;
}

/* Table row hover */
.table tbody tr:hover {
  @apply bg-base-100/50;
}

/* Count-up animation for percentile numbers */
@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-count-up {
  animation: countUp 500ms ease-out forwards;
}


/* Interactive glass chip — toggle buttons inside toolbars */
.glass-chip {
  @apply inline-flex items-center gap-1 rounded-full border border-white/10
         bg-base-100/85 px-2.5 py-1 text-xs font-medium
         backdrop-blur-sm shadow-[inset_0_1px_1px_rgba(255,255,255,0.15),0_1px_3px_rgba(0,0,0,0.04)]
         text-base-content/75 transition-all hover:text-primary hover:bg-primary/10;
}

.glass-chip-active {
  @apply border-white/10 bg-primary/20 text-primary
         shadow-[inset_0_1px_1px_rgba(255,255,255,0.2),0_2px_6px_rgba(0,0,0,0.08)];
}

/* Taxi easter egg — drives across the container and loops */
@keyframes taxiDrive {
  0% {
    transform: translateX(-120px);
  }
  100% {
    transform: translateX(calc(100vw + 120px));
  }
}

.animate-taxi-drive {
  animation: taxiDrive 14s linear infinite;
}

/* Smoke — two-frame toggle between ascii puff shapes */
@keyframes smokeToggle {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

.animate-smoke-toggle {
  animation: smokeToggle 0.8s steps(1) infinite;
}

.animate-smoke-toggle-alt {
  animation: smokeToggle 0.8s steps(1) infinite 0.4s;
}
